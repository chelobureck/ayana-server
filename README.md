# ๐ฏ AI Tutor Server (FastAPI + Postgres + Redis + Docker)

**ะะพัะพะฒัะน ะบ ะทะฐะฟััะบั ะฑัะบะตะฝะด ะดะปั Flutter MVP ั AI-ัะตะฟะตัะธัะพัะพะผ** ๐

## ๐ ะงัะพ ััะพ?

AI Tutor Server - ััะพ ะฟะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน ะฑัะบะตะฝะด ะดะปั ะพะฑัะฐะทะพะฒะฐัะตะปัะฝะพะณะพ ะฟัะธะปะพะถะตะฝะธั ั ะดะฒัะผั AI-ัะพะปัะผะธ:
- **ะะนั** - ะดะพะฑััะน ััะธัะตะปั, ะพะฑัััะฝัะตั ะฟัะพััะพ ะธ ะฟะพะฝััะฝะพ
- **ะัะฝะฐ** - ะพะดะฝะพะบะปะฐััะฝะธัะฐ, ะทะฐะดะฐะตั ะฒะพะฟัะพัั ะธ ะฒะตะดะตั ะบ ะผะธะฝะธ-ะฟัะพะตะบัะฐะผ

ะัะฟะพะปัะทัะตั **ัะตัะฝะธะบั ะคะตะนะฝะผะฐะฝะฐ**: ะพะฑัััะฝะตะฝะธะต โ ะฒะพะฟัะพัั โ ะธัะฟัะฐะฒะปะตะฝะธั โ ะฟัะฐะบัะธะบะฐ.

## ๐ ะัััััะน ััะฐัั (5 ะผะธะฝัั)

### 1. ะะพะดะณะพัะพะฒะบะฐ
```bash
# ะฃะฑะตะดะธัะตัั ััะพ Docker Desktop ะทะฐะฟััะตะฝ
docker --version

# ะกะบะพะฟะธััะนัะต ะบะพะฝัะธะณััะฐัะธั
cp env.example .env
```

### 2. ะะฐัััะพะนะบะฐ API ะบะปััะฐ
ะัะบัะพะนัะต `.env` ะธ ะทะฐะฟะพะปะฝะธัะต **ะะะฏะะะขะะะฌะะ**:
```bash
OPENAI_API_KEY=your_api_key_here
OPENAI_BASE_URL=https://api.openrouter.ai/v1
OPENAI_MODEL=meta-llama/llama-4-scout-17b-16e-instruct
```

### 3. ะะฐะฟััะบ
```bash
# Windows
start.bat

# Mac/Linux
chmod +x start.sh
./start.sh

# ะะปะธ ะฒัััะฝัั
docker compose up --build
```

### 4. ะัะพะฒะตัะบะฐ
```bash
curl http://localhost:8000/health
# ะะพะปะถะตะฝ ะฒะตัะฝััั: {"ok": true}
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะะฒัะพะผะฐัะธัะตัะบะพะต ัะตััะธัะพะฒะฐะฝะธะต
```bash
python test_api.py
```

### ะััะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต
```bash
# ะกะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
curl -X POST "http://localhost:8000/auth/ensure-user?uid=demo123&display_name=Kid"

# ะะธะฐะปะพะณ ั AI
curl -X POST http://localhost:8000/lesson/turn \
  -H "Content-Type: application/json" \
  -d '{
    "user_uid":"demo123",
    "messages":[{"role":"user","content":"ะะพัะตะผั 2+2=4?"}]
  }'
```

## ๐ฑ ะะฝัะตะณัะฐัะธั ั Flutter

### ะะฐัััะพะนะบะฐ baseUrl
```dart
class ApiConfig {
  // ะะพะบะฐะปัะฝะพ
  static const String baseUrl = 'http://localhost:8000';
  
  // ะะฐ ััััะพะนััะฒะต (ะทะฐะผะตะฝะธัะต ะฝะฐ ะฒะฐั IP)
  // static const String baseUrl = 'http://192.168.1.100:8000';
}
```

### ะัะฝะพะฒะฝัะต endpoints
- `POST /lesson/turn` - **ะณะปะฐะฒะฝัะน endpoint** ะดะปั ะดะธะฐะปะพะณะฐ ั AI
- `POST /auth/ensure-user` - ัะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
- `POST /project/create` - ัะพะทะดะฐะฝะธะต ะฟัะพะตะบัะฐ

## ๐ญ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

### ะะพะปะธ AI
1. **ะะนั** - ััะธัะตะปั, ะพะฑัััะฝัะตั ะฟัะพััะพ ะธ ะฟะพะฝััะฝะพ
2. **ะัะฝะฐ** - ะพะดะฝะพะบะปะฐััะฝะธัะฐ, ะทะฐะดะฐะตั ะฒะพะฟัะพัั ะธ ะฒะตะดะตั ะบ ะฟัะพะตะบัั

### ะขะตัะฝะธะบะฐ ะคะตะนะฝะผะฐะฝะฐ
- ะัะพััะพะต ะพะฑัััะฝะตะฝะธะต โ ะะพะฟัะพัั โ ะัะฟัะฐะฒะปะตะฝะธั โ ะะธะฝะธ-ะฟัะพะตะบั

### ะัะธะผะตั ะดะธะฐะปะพะณะฐ
```
ะะตะฑะตะฝะพะบ: "ะะพัะตะผั 2+2=4?"
ะะนั: "ะัะตะดััะฐะฒั, ััะพ ั ัะตะฑั ะตััั 2 ัะฑะปะพะบะฐ, ะธ ะผะฐะผะฐ ะดะฐะปะฐ ะตัะต 2. ะกะบะพะปัะบะพ ะฒัะตะณะพ?"
ะะตะฑะตะฝะพะบ: "4 ัะฑะปะพะบะฐ!"
ะัะฝะฐ: "ะ ะตัะปะธ ั ัะตะฑั 3 ะบะพะฝัะตัั ะธ ะฟะฐะฟะฐ ะดะฐะป ะตัะต 1?"
```

## ๐ง ะขะตัะฝะธัะตัะบะธะน ััะตะบ

- **FastAPI** - ัะพะฒัะตะผะตะฝะฝัะน Python ะฒะตะฑ-ััะตะนะผะฒะพัะบ
- **PostgreSQL** - ะพัะฝะพะฒะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั (SQLAlchemy + Alembic-ready)
- **Redis** - ะบะตั ะดะปั LLM ะพัะฒะตัะพะฒ (dedupe + TTL)
- **Docker** - ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั ะดะปั ะฟัะพััะพะณะพ ะดะตะฟะปะพั
- **OpenAI-compatible** - ัะฐะฑะพัะฐะตั ั ะปัะฑัะผ LLM API

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ (34 ัะฐะนะปะฐ)

```
ai-tutor-server/
โโโ ๐ฏ ะะะงะะะ ะะะะะขะซ
โ   โโโ WELCOME.md              # ๐ ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั!
โ   โโโ START_HERE.md           # ๐ฏ **ะะะงะะะขะ ะะขะกะฎะะ!**
โ   โโโ QUICKSTART.md           # โก ะัััััะน ััะฐัั ะทะฐ 5 ะผะธะฝัั
โ   โโโ FIRST_RUN.md            # ๐ ะะตัะฒัะน ะทะฐะฟััะบ ะดะปั ะฝะพะฒะธัะบะพะฒ
โ   โโโ GETTING_STARTED.md      # ๐ ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ
โโโ ๐ ะะะคะะะะะฆะะฏ
โ   โโโ CHECKLIST.md            # โ ะงะตะบ-ะปะธัั ะณะพัะพะฒะฝะพััะธ
โ   โโโ PROJECT_SUMMARY.md      # ๐ ะัะฐัะบะพะต ัะตะทัะผะต
โ   โโโ FILES_OVERVIEW.md       # ๐ ะะฑะทะพั ะฒัะตั ัะฐะนะปะพะฒ
โ   โโโ PROJECT_COMPLETE.md     # ๐ ะกัะฐััั ะณะพัะพะฒะฝะพััะธ
โ   โโโ FINAL_SUMMARY.md        # ๐ฏ ะคะธะฝะฐะปัะฝะพะต ัะตะทัะผะต
โโโ ๐ง ะขะะฅะะะงะะกะะะฏ ะะะะฃะะะะขะะฆะะฏ
โ   โโโ USAGE_GUIDE.md          # ๐ ะัะบะพะฒะพะดััะฒะพ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
โ   โโโ deploy_guide.md         # ๐ ะะตะฟะปะพะน ะฝะฐ ะฟัะพะดะฐะบัะตะฝ
โ   โโโ flutter_integration.md  # ๐ฑ ะะฝัะตะณัะฐัะธั ั Flutter
โ   โโโ curl_examples.md        # ๐งช ะัะธะผะตัั API ะฒัะทะพะฒะพะฒ
โโโ ๐ PYTHON ะะะะะะะะะะ
โ   โโโ app/
โ       โโโ __init__.py          # ะะฐะบะตั Python
โ       โโโ main.py              # FastAPI ะฟัะธะปะพะถะตะฝะธะต
โ       โโโ config.py            # ะะฐัััะพะนะบะธ (.env)
โ       โโโ db.py                # ะะฐะทะฐ ะดะฐะฝะฝัั (SQLAlchemy)
โ       โโโ models.py            # ะะพะดะตะปะธ ะะ (User, Session, Message, Project)
โ       โโโ schemas.py           # Pydantic ััะตะผั ะดะปั API
โ       โโโ cache.py             # Redis ะบะตั ะดะปั LLM
โ       โโโ ai.py                # LLM ะธะฝัะตะณัะฐัะธั
โ       โโโ prompts.py           # ะัะพะผะฟัั ะดะปั ัะพะปะตะน ะะนั/ะัะฝะฐ
โ       โโโ deps.py              # ะะฐะฒะธัะธะผะพััะธ (ะฐััะตะฝัะธัะธะบะฐัะธั)
โ       โโโ routers/             # API endpoints
โ           โโโ __init__.py      # ะะฐะบะตั ัะพััะตัะพะฒ
โ           โโโ health.py        # /health - ะฟัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
โ           โโโ auth.py          # /auth/* - ัะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ
โ           โโโ lesson.py        # /lesson/* - ะดะธะฐะปะพะณะธ ั AI (ะะกะะะะะะ)
โ           โโโ project.py       # /project/* - ัะพะทะดะฐะฝะธะต ะฟัะพะตะบัะพะฒ
โโโ ๐ณ DOCKER
โ   โโโ Dockerfile               # ะะฑัะฐะท Python ะฟัะธะปะพะถะตะฝะธั
โ   โโโ docker-compose.yml       # ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ (API + PostgreSQL + Redis)
โ   โโโ render.yaml              # ะะตะฟะปะพะน ะฝะฐ Render
โโโ ๐ ะกะะะะะขะซ ะะะะฃะกะะ
โ   โโโ start.bat                # ะะฐะฟััะบ ะดะปั Windows
โ   โโโ start.ps1                # ะะฐะฟััะบ ะดะปั PowerShell
โ   โโโ start.sh                 # ะะฐะฟััะบ ะดะปั Linux/Mac
โโโ ๐งช ะขะะกะขะะะะะะะะ
โ   โโโ test_api.py              # Python ัะตััั ะดะปั ะฒัะตั endpoints
โโโ โ๏ธ ะะะะคะะะฃะะะฆะะฏ
โ   โโโ requirements.txt          # Python ะทะฐะฒะธัะธะผะพััะธ
โ   โโโ env.example              # ะัะธะผะตั ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
โ   โโโ .gitignore               # ะัะบะปััะตะฝะธั ะดะปั Git
โโโ ๐ ะะะะฃะะะะขะะฆะะฏ
    โโโ README.md                 # ะะฝะณะปะธะนัะบะฐั ะฒะตััะธั (ััะพั ัะฐะนะป)
    โโโ README_RU.md             # ะัััะบะฐั ะฒะตััะธั
```

## ๐ ะะตะฟะปะพะน

### Render (ัะตะบะพะผะตะฝะดัะตััั ะดะปั MVP)
- ะะฒัะพะผะฐัะธัะตัะบะธะน ะดะตะฟะปะพะน ะธะท Git
- Managed PostgreSQL + Redis
- ะะตัะฟะปะฐัะฝัะน ะฟะปะฐะฝ ะดะปั MVP
- ะะพะดัะพะฑะฝัะต ะธะฝััััะบัะธะธ ะฒ `deploy_guide.md`

### VPS + Docker
- ะะพะปะฝัะน ะบะพะฝััะพะปั
- Docker Compose
- ะะฐัััะพะนะบะฐ SSL

### Google Cloud Run
- Serverless
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต
- Pay-per-use

## ๐ก ะัะตะธะผััะตััะฒะฐ

โ **ะะพัะพะฒ ะบ ะทะฐะฟััะบั** - ะฒัะต ัะฐะนะปั ัะพะทะดะฐะฝั  
โ **Docker-ready** - ัะฐะฑะพัะฐะตั ะธะท ะบะพัะพะฑะบะธ  
โ **LLM-ะฐะณะฝะพััะธะบ** - ะปัะฑะพะน OpenAI-ัะพะฒะผะตััะธะผัะน API  
โ **Flutter-ready** - ะณะพัะพะฒัะต ะฟัะธะผะตัั ะธะฝัะตะณัะฐัะธะธ  
โ **ะัะพะดะฐะบัะตะฝ-ready** - ะธะฝััััะบัะธะธ ะฟะพ ะดะตะฟะปะพั  
โ **ะะพะบัะผะตะฝัะธัะพะฒะฐะฝ** - ะฟะพะดัะพะฑะฝัะต ะณะฐะนะดั  
โ **ะขะตััะธัะพะฒะฐะฝะธะต** - ะฐะฒัะพะผะฐัะธัะตัะบะธะต ัะตััั  
โ **ะะตะทะพะฟะฐัะฝะพััั** - JWT ะฐััะตะฝัะธัะธะบะฐัะธั  

## ๐ฏ ะะดะตะฐะปัะฝะพ ะดะปั

- **Flutter MVP** ั AI-ัะตะฟะตัะธัะพัะพะผ
- **ะะฑัะฐะทะพะฒะฐัะตะปัะฝัะต ะฟัะธะปะพะถะตะฝะธั** ะดะปั ะดะตัะตะน
- **ะัััััะน ะฟัะพัะพัะธะฟ** AI-ัะตัะฒะธัะฐ
- **ะะทััะตะฝะธะต FastAPI** + ัะพะฒัะตะผะตะฝะฝะพะณะพ Python
- **ะะตะฟะปะพะน ะฝะฐ ะพะฑะปะฐะบะพ** ั ะผะธะฝะธะผะฐะปัะฝัะผะธ ะฝะฐัััะพะนะบะฐะผะธ

## ๐ ะะพะบัะผะตะฝัะฐัะธั

### ๐ฏ **ะัะฝะพะฒะฝัะต ัะฐะนะปั ะดะปั ะฝะฐัะฐะปะฐ:**
- **`START_HERE.md`** - ๐ฏ **ะฝะฐัะฝะธัะต ะพัััะดะฐ!**
- **`QUICKSTART.md`** - โก ะฑัััััะน ััะฐัั ะทะฐ 5 ะผะธะฝัั
- **`FIRST_RUN.md`** - ๐ ะฟะตัะฒัะน ะทะฐะฟััะบ ะดะปั ะฝะพะฒะธัะบะพะฒ
- **`GETTING_STARTED.md`** - ๐ ะฟะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ

### ๐ **ะะฝัะพัะผะฐัะธะพะฝะฝัะต ัะฐะนะปั:**
- **`CHECKLIST.md`** - โ ัะตะบ-ะปะธัั ะณะพัะพะฒะฝะพััะธ
- **`PROJECT_SUMMARY.md`** - ๐ ะบัะฐัะบะพะต ัะตะทัะผะต
- **`FILES_OVERVIEW.md`** - ๐ ะพะฑะทะพั ะฒัะตั ัะฐะนะปะพะฒ
- **`PROJECT_COMPLETE.md`** - ๐ ััะฐััั ะณะพัะพะฒะฝะพััะธ
- **`FINAL_SUMMARY.md`** - ๐ฏ ัะธะฝะฐะปัะฝะพะต ัะตะทัะผะต

### ๐ง **ะขะตัะฝะธัะตัะบะธะต ัะฐะนะปั:**
- **`USAGE_GUIDE.md`** - ๐ ััะบะพะฒะพะดััะฒะพ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- **`deploy_guide.md`** - ๐ ะดะตะฟะปะพะน ะฝะฐ ะฟัะพะดะฐะบัะตะฝ
- **`flutter_integration.md`** - ๐ฑ ะธะฝัะตะณัะฐัะธั ั Flutter
- **`curl_examples.md`** - ๐งช ะฟัะธะผะตัั API ะฒัะทะพะฒะพะฒ

## ๐จ ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### Docker ะฝะต ะทะฐะฟััะบะฐะตััั
```bash
# ะัะพะฒะตัััะต Docker Desktop
docker --version

# ะัะธััะธัะต ะธ ะฟะตัะตะทะฐะฟัััะธัะต
docker compose down -v
docker compose up --build
```

### API ะฝะต ะพัะฒะตัะฐะตั
```bash
# ะัะพะฒะตัััะต .env ัะฐะนะป
cat .env | grep OPENAI

# ะัะพะฒะตัััะต ะปะพะณะธ
docker compose logs api
```

### ะะฐะทะฐ ะดะฐะฝะฝัั ะฝะต ะฟะพะดะบะปััะฐะตััั
```bash
# ะะตัะตะทะฐะฟัััะธัะต PostgreSQL
docker compose restart postgres
```

## ๐ ะัะถะฝะฐ ะฟะพะผะพัั?

1. ะัะพะฒะตัััะต ะปะพะณะธ: `docker compose logs -f`
2. ะฃะฑะตะดะธัะตัั ััะพ ะฒัะต ัะตัะฒะธัั ะทะฐะฟััะตะฝั: `docker compose ps`
3. ะัะพะฒะตัััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั: `docker compose exec api env`
4. ะกะพะทะดะฐะนัะต issue ะฒ ัะตะฟะพะทะธัะพัะธะธ

## ๐ฏ ะกะปะตะดัััะธะต ัะฐะณะธ

1. โ **ะะฐะฟัััะธัะต ัะตัะฒะตั** (ะฒั ัะถะต ะทะดะตัั!)
2. ๐ **ะะฐัััะพะนัะต API ะบะปัั** ะฒ `.env`
3. ๐งช **ะัะพัะตััะธััะนัะต API** ัะตัะตะท `test_api.py`
4. ๐ฑ **ะะฝัะตะณัะธััะนัะต ั Flutter** ะธัะฟะพะปัะทัั ะฟัะธะผะตัั
5. ๐ **ะะตะฟะปะพะน ะฝะฐ ะฟัะพะดะฐะบัะตะฝ** ะฟะพ `deploy_guide.md`

## ๐ก ะะพะปะตะทะฝัะต ัะพะฒะตัั

- **OpenRouter** - ะปัััะธะน ะฒัะฑะพั ะดะปั Llama 4 Scout
- **Redis** ะบะตัะธััะตั ะพัะฒะตัั LLM ะดะปั ัะบะพะฝะพะผะธะธ API ะฒัะทะพะฒะพะฒ
- **CORS** ะฝะฐัััะพะตะฝ ะดะปั ะฒัะตั ะธััะพัะฝะธะบะพะฒ ะฒ dev ัะตะถะธะผะต
- ะ **ัะฐะทัะฐะฑะพัะบะต** ะผะพะถะฝะพ ะฟะตัะตะดะฐะฒะฐัั UID ะฝะฐะฟััะผัั ะบะฐะบ ัะพะบะตะฝ

---

## ๐ ะะพะทะดัะฐะฒะปัะตะผ!

**ะะฐั AI Tutor Server ะฟะพะปะฝะพัััั ะณะพัะพะฒ ะบ ัะฐะฑะพัะต!**

ะัะพััะพ ัะปะตะดัะนัะต `START_HERE.md` ะธ ะฝะฐัะฝะธัะต ัะฐะทัะฐะฑะพัะบั Flutter ะฟัะธะปะพะถะตะฝะธั ั AI-ัะตะฟะตัะธัะพัะพะผ.

---

**๐ก ะะปะฐะฒะฝัะน ัะพะฒะตั**: ะะฐัะฝะธัะต ั `START_HERE.md` - ััะพ ะฒะฐั ะพัะฝะพะฒะฝะพะน ัะฐะนะป ะดะปั ะฝะฐัะฐะปะฐ ัะฐะฑะพัั!

**๐ ะฃะดะฐัะธ ั ะฒะฐัะธะผ ะฟัะพะตะบัะพะผ!**

---

## ๐ ะกัะฐัะธััะธะบะฐ ะฟัะพะตะบัะฐ

- **ะัะตะณะพ ัะฐะนะปะพะฒ**: 34
- **Python ะบะพะด**: ~15 KB
- **ะะพะบัะผะตะฝัะฐัะธั**: ~140 KB
- **Docker ะบะพะฝัะธะณััะฐัะธั**: ~2 KB
- **ะกะบัะธะฟัั ะทะฐะฟััะบะฐ**: ~3 KB
- **ะขะตััะธัะพะฒะฐะฝะธะต**: ~7 KB

**ะะฑัะธะน ัะฐะทะผะตั ะฟัะพะตะบัะฐ**: ~167 KB

**ะกัะฐััั**: ๐ฏ **ะะะขะะ ะ ะะะะฃะกะะฃ!** 